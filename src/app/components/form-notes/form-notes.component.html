<form [formGroup]="form" (ngSubmit)="submit()">

  <ion-item>
    <ion-label>
      Title
    </ion-label>
    <ion-input label="title" type="text" formControlName="title"></ion-input>
  </ion-item>

  <ion-item>
    <ion-label>
      Description
    </ion-label>
    <ion-textarea label="Description" formControlName="description"></ion-textarea>
  </ion-item>

  <ion-item>
    <ion-label>
      Date
    </ion-label>
    <ion-datetime-button datetime="datetime"></ion-datetime-button>
    <ion-modal [keepContentsMounted]="true">
      <ng-template>
        <ion-datetime id="datetime" formControlName="datetimePicker"></ion-datetime>
      </ng-template>
    </ion-modal>
  </ion-item>

  <ion-toolbar>

    <ion-button 
      slot="start" 
      shape="round" 
      [color]="(this.location.latitude && this.location.longitude) ? 'success' : 'primary'" 
      (click)="takeLocation()"
      [@btnAnimate]="(this.location.latitude && this.location.longitude) ? 'success' : 'primary'">
      <ion-icon slot="icon-only" src="assets/icons/compass.svg"></ion-icon>
      @if ((this.location.latitude && this.location.longitude)) {
        <ion-icon slot="icon-only" src="assets/icons/trash.svg"></ion-icon>
      } @else {
        <ion-icon slot="icon-only" src="assets/icons/add-outline.svg"></ion-icon>

      }
    </ion-button>

    <ion-button
      slot="end" 
      shape="round" 
      [color]="this.img ? 'success' : 'primary'"
      (click)="takePic()"
      [@btnAnimate]="this.img ? 'success' : 'primary'">
      <ion-icon slot="icon-only" src="assets/icons/image.svg"></ion-icon>
      @if (this.img) {
        <ion-icon slot="icon-only" src="assets/icons/trash.svg"></ion-icon>
      } @else {
        <ion-icon slot="icon-only" src="assets/icons/add-outline.svg"></ion-icon>

      }
    </ion-button>

  </ion-toolbar>

  @if ((this.location.latitude && this.location.longitude)) {
    <app-leaflet-map 
      [latitude]="this.location.latitude" 
      [longitude]="this.location.longitude"
    ></app-leaflet-map>
  }

  @if (this.img) {
    <ion-item>
      <img class="imgPicture" [src]="'data:image/jpg;base64,'+ this.img"/> 
    </ion-item>
  }

  <ion-button type="submit" expand="full" [disabled]="!form.valid">Submit</ion-button>

</form>